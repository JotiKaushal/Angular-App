{"version":3,"sources":["./src/app/Auth/auth.component.ts","./src/app/Auth/auth.component.html","./src/app/Auth/auth.module.ts"],"names":[],"mappings":"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","file":"Auth-auth-module.js","sourcesContent":["import { Component, ComponentFactoryResolver, OnDestroy, OnInit, ViewChild } from \"@angular/core\";\r\nimport { NgForm } from \"@angular/forms\";\r\nimport { AuthResponseData, AuthService } from \"./auth.service\";\r\nimport { Observable, Subscription } from \"rxjs\";\r\nimport { THIS_EXPR } from \"@angular/compiler/src/output/output_ast\";\r\nimport { Router } from \"@angular/router\";\r\nimport { AlertComponent } from \"../shared/alert/alert.component\"; \r\nimport { PlaceholderDirective } from \"../shared/placeholder/placeholder.directive\";\r\nimport { Store } from \"@ngrx/store\";\r\nimport * as fromApp from '../store/app.reducer';\r\nimport * as AuthActions from './store/auth.actions';\r\n@Component({\r\n    selector: 'app-auth',\r\n    templateUrl: './auth.component.html'\r\n})\r\n\r\nexport class AuthComponent implements OnInit, OnDestroy{\r\n    isLoginMode = true;\r\n    isLoading = false;\r\n    error : string = null;\r\n@ViewChild(PlaceholderDirective, {static: false})  \r\nalertHost : PlaceholderDirective;\r\n\r\nprivate closeSub : Subscription;\r\nprivate storeSub : Subscription;\r\nconstructor(private authService: AuthService, \r\n    private router: Router,\r\n    private componentFactoyResolver: ComponentFactoryResolver,\r\n    private store : Store<fromApp.AppState>){}\r\n\r\n    onSwitchMode(){\r\n        this.isLoginMode = !this.isLoginMode;\r\n    }\r\n\r\n    ngOnInit(){\r\n       this.storeSub =  this.store.select('auth').subscribe(\r\n            authState =>{\r\n            this.isLoading = authState.loading;\r\n            this.error = authState.authError;\r\n            if(this.error){\r\n                this.showErrorAlert(this.error);\r\n            }\r\n            }\r\n        )\r\n    }\r\n\r\n    onSubmit(form : NgForm){\r\n        if(!form.valid){\r\n            return;\r\n        }\r\n\r\n        const email = form.value.email;\r\n        const password = form.value.password;\r\n       //let authObs : Observable<AuthResponseData>\r\n\r\n        this.isLoading = true;\r\n     if(this.isLoginMode){\r\n         //for redux \r\n         this.store.dispatch(new AuthActions.LoginStart({email: email, password:password}))\r\n       //for service\r\n         // authObs =this.authService.login(email, password);\r\n     }\r\n    else{\r\n        this.store.dispatch(new AuthActions.SignupStart({email: email, password:password}))\r\n     // authObs = this.authService.signup(email, password);\r\n    }\r\n\r\n   \r\n\r\n    // authObs.subscribe(\r\n    //     resData => {\r\n    //     console.log(resData);\r\n    //     this.isLoading = false;\r\n    //     this.router.navigate(['/recipes']);\r\n    //    },\r\n    // errorMessage=> {\r\n    //  console.log(errorMessage);\r\n    // this.error = errorMessage;\r\n    // this.showErrorAlert(errorMessage);\r\n    //  this.isLoading = false;\r\n    //  }\r\n    // );\r\n    \r\n    form.reset();\r\n}\r\n\r\nonHandeError(){\r\n    this.store.dispatch(new AuthActions.ClearError());\r\n}\r\n\r\nprivate showErrorAlert(message : string){\r\n   //const alertCmp = new AlertComponent();\r\n  const alertCmpFactory = this.componentFactoyResolver\r\n  .resolveComponentFactory(AlertComponent);\r\n  const hostViewContainerRef = this.alertHost.viewcontainerRef;\r\n  hostViewContainerRef.clear();\r\n\r\n   const componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\r\n   componentRef.instance.message = message;\r\n   this.closeSub = componentRef.instance.close.subscribe( () => {\r\n       this.closeSub.unsubscribe();\r\n      hostViewContainerRef.clear();\r\n   })\r\n}\r\n\r\nngOnDestroy(){\r\nif(this.closeSub){\r\n    this.closeSub.unsubscribe();\r\n}\r\nif(this.storeSub){\r\n    this.storeSub.unsubscribe();\r\n}\r\n}\r\n\r\n}","<ng-template appPlaceholder></ng-template>\r\n<div class=\"row\">\r\n    <div class=\"col-xs-12 col-md-6 col-md-offset-3\"> \r\n        <!-- <div class=\"alert alert-danger\" *ngIf=\"error\">\r\n            <p>{{error}}</p>\r\n        </div> -->\r\n        <!-- <app-alert [message]=\"error\" *ngIf=\"error\"\r\n        (close)=\"onHandeError()\"></app-alert> -->\r\n\r\n        <div *ngIf=\"isLoading\" style=\"text-align:center;\">\r\n            <app-loading-spinner></app-loading-spinner>\r\n        </div>\r\n\r\n<form #authForm =\"ngForm\"\r\n(ngSubmit)=\"onSubmit(authForm)\"\r\n*ngIf=\"!isLoading\">\r\n    <div class=\"form-group\">\r\n<label for=\"email\">E-Mail</label>\r\n    <input type=\"email\" id=\"email\" class=\"form-control\"\r\n    ngModel\r\n    name=\"email\"\r\n    required\r\n    email>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label for=\"password\">Password</label>\r\n            <input type=\"password\" id=\"password\" class=\"form-control\"\r\n            ngModel\r\n            name=\"password\"\r\n            required\r\n            minlength=\"6\">\r\n            </div>\r\n            <div>\r\n                \r\n                <button class=\"btn btn-primary\" type=\"submit\"\r\n                [disabled]=\"!authForm.valid\">\r\n                    {{isLoginMode ? 'Login' : 'Sign Up'}}</button> |\r\n           \r\n                <button class=\"btn btn-primary\" type=\"button\" (click)=\"onSwitchMode()\">\r\n                    Switch To {{isLoginMode ? 'Sign Up' : 'Login'}}</button>\r\n            </div>\r\n</form>\r\n    </div>\r\n</div>","import { CommonModule } from \"@angular/common\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { FormsModule } from \"@angular/forms\";\r\nimport { RouterModule } from \"@angular/router\";\r\nimport { SharedModule } from \"../shared/shared.module\";\r\nimport { AuthComponent } from \"./auth.component\";\r\n\r\n\r\n@NgModule({\r\n    declarations:[\r\n        AuthComponent\r\n    ],\r\n    imports:[\r\n        CommonModule,\r\n        FormsModule,\r\n        RouterModule.forChild([{path: '', component: AuthComponent}]),\r\n        SharedModule\r\n    ]\r\n})\r\n\r\nexport class AuthModule{\r\n\r\n}"],"sourceRoot":"webpack:///"}